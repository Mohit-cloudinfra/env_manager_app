{
  "Version": "2019-10-30",
  "StartAction": "entry",
  "Actions": [
    {
      "Identifier": "entry",
      "Type": "Start",
      "Transitions": {
        "NextAction": "setVoice"
      }
    },
    {
      "Identifier": "setVoice",
      "Type": "SetVoice",
      "Parameters": {
        "Voice": "Joanna"
      },
      "Transitions": {
        "NextAction": "setLogging"
      }
    },
    {
      "Identifier": "setLogging",
      "Type": "SetLoggingBehavior",
      "Parameters": {
        "EnableLogging": true
      },
      "Transitions": {
        "NextAction": "welcomePrompt"
      }
    },
    {
      "Identifier": "welcomePrompt",
      "Type": "PlayPrompt",
      "Parameters": {
        "Text": "Welcome to SmartBank. Press 1 for Account Info, 2 for Credit Cards, 3 for Loans, 4 to Report Lost Card, or 9 to talk to an agent."
      },
      "Transitions": {
        "NextAction": "getInput"
      }
    },
    {
      "Identifier": "getInput",
      "Type": "GetCustomerInput",
      "Parameters": {
        "InputType": "DTMF",
        "Timeout": 5,
        "MaxDigits": 1
      },
      "Transitions": {
        "NextAction": "checkInput",
        "Errors": {
          "NoInput": "noInputPrompt"
        }
      }
    },
    {
      "Identifier": "noInputPrompt",
      "Type": "PlayPrompt",
      "Parameters": {
        "Text": "We didn't receive any input. Please try again."
      },
      "Transitions": {
        "NextAction": "getInput"
      }
    },
    {
      "Identifier": "checkInput",
      "Type": "CheckCustomerInput",
      "Branches": [
        {
          "Condition": "Equals",
          "Value": "1",
          "NextAction": "accountInfo"
        },
        {
          "Condition": "Equals",
          "Value": "2",
          "NextAction": "creditCard"
        },
        {
          "Condition": "Equals",
          "Value": "3",
          "NextAction": "loanInfo"
        },
        {
          "Condition": "Equals",
          "Value": "4",
          "NextAction": "lostCard"
        },
        {
          "Condition": "Equals",
          "Value": "9",
          "NextAction": "checkQueueStatus"
        }
      ],
      "DefaultBranch": {
        "NextAction": "invalidInputPrompt"
      }
    },
    {
      "Identifier": "invalidInputPrompt",
      "Type": "PlayPrompt",
      "Parameters": {
        "Text": "Invalid input. Please try again."
      },
      "Transitions": {
        "NextAction": "getInput"
      }
    },
    {
      "Identifier": "accountInfo",
      "Type": "PlayPrompt",
      "Parameters": {
        "Text": "Your current account balance is one thousand dollars."
      },
      "Transitions": {
        "NextAction": "endFlow"
      }
    },
    {
      "Identifier": "creditCard",
      "Type": "PlayPrompt",
      "Parameters": {
        "Text": "Your credit card due amount is 500 dollars."
      },
      "Transitions": {
        "NextAction": "endFlow"
      }
    },
    {
      "Identifier": "loanInfo",
      "Type": "PlayPrompt",
      "Parameters": {
        "Text": "Your next loan EMI is due on 15th of this month."
      },
      "Transitions": {
        "NextAction": "endFlow"
      }
    },
    {
      "Identifier": "lostCard",
      "Type": "PlayPrompt",
      "Parameters": {
        "Text": "We have blocked your lost card. A new card will be sent to your registered address."
      },
      "Transitions": {
        "NextAction": "endFlow"
      }
    },
    {
      "Identifier": "checkQueueStatus",
      "Type": "CheckQueueStatus",
      "Parameters": {
        "Queue": "SmartBankQueue"
      },
      "Branches": [
        {
          "Condition": "HasAvailableAgents",
          "NextAction": "transferToQueue"
        }
      ],
      "DefaultBranch": {
        "NextAction": "noAgentsPrompt"
      }
    },
    {
      "Identifier": "noAgentsPrompt",
      "Type": "PlayPrompt",
      "Parameters": {
        "Text": "All our agents are currently busy. Please try again later."
      },
      "Transitions": {
        "NextAction": "endFlow"
      }
    },
    {
      "Identifier": "transferToQueue",
      "Type": "TransferToQueue",
      "Parameters": {
        "Queue": "SmartBankQueue"
      },
      "Transitions": {}
    },
    {
      "Identifier": "endFlow",
      "Type": "Disconnect",
      "Transitions": {}
    }
  ]
}
